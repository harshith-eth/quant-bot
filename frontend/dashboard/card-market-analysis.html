<!DOCTYPE html>
<div class="market-analysis-card-container">
    <h2 style="font-weight: normal;">MARKET ANALYSIS 
        <span id="market-stats" style="float: right; font-size: 0.9em; font-family: 'Courier New', monospace; color: #00ff00; font-weight: normal;">
            LOADING...
        </span>
    </h2>

    <div class="market-content">
        <div class="analysis-container">
            <!-- Real Market Analysis Content -->
            <div id="market-analysis-content">
            <div class="analysis-section">
                <div class="section-title">
                        üìä LOADING REAL MARKET DATA...
                </div>
                <div class="section-content">
                        <div style="text-align: center; color: #00ff00; padding: 20px;">
                            üìà FETCHING LIVE MARKET INTELLIGENCE...
                        </div>
                        </div>
                        </div>
                        </div>
                    </div>
            <div class="analysis-section">
                <div class="section-title">
                    ü¶ç RETARD STRENGTH INDEX
                </div>
                <div class="section-content">
                    <div class="strength-meter">
                        <div class="meter-bar">
                            <div class="fill" style="width: 85%"></div>
                        </div>
                        <div class="meter-labels">
                            <span>WEAK</span>
                            <span>HODL</span>
                            <span>STRONG</span>
                            <span class="current">RETARDED</span>
                        </div>
                    </div>
                    <div class="strength-stats">
                        <div class="stat">
                            <span>Paper Hands Ratio:</span>
                            <span class="value decreasing">-69%</span>
                        </div>
                        <div class="stat">
                            <span>Diamond Hands:</span>
                            <span class="value increasing">+420%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Manipulation Scanner -->
            <div class="analysis-section danger">
                <div class="section-title">
                    üéØ MANIPULATION RADAR
                </div>
                <div class="section-content">
                    <div class="radar-display">
                        <div class="radar-sweep"></div>
                        <div class="target" style="top: 30%; left: 60%"></div>
                        <div class="target" style="top: 45%; left: 25%"></div>
                        <div class="target" style="top: 70%; left: 80%"></div>
                    </div>
                    <div class="manipulation-alerts">
                        <div class="alert">
                            <span class="time">NOW</span>
                            <span class="event">PUMP GROUP FORMING</span>
                            <span class="probability">95%</span>
                        </div>
                        <div class="alert">
                            <span class="time">5m</span>
                            <span class="event">WHALE ACCUMULATION</span>
                            <span class="probability">87%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Cycle -->
            <div class="analysis-section">
                <div class="section-title">
                    üåä MARKET CYCLE
                </div>
                <div class="section-content">
                    <div class="cycle-container">
                        <div class="cycle-stages">
                            <div class="stage-box" data-stage="STEALTH">
                                <div class="stage-dot"></div>
                                <span>STEALTH</span>
                                <div class="stage-value">+10x</div>
                            </div>
                            <div class="stage-box active" data-stage="FOMO">
                                <div class="stage-dot"></div>
                                <span>FOMO</span>
                                <div class="stage-value">+50x</div>
                            </div>
                            <div class="stage-box next" data-stage="MOON">
                                <div class="stage-dot"></div>
                                <span>MOON</span>
                                <div class="stage-value">+100x</div>
                            </div>
                            <div class="stage-box" data-stage="DUMP">
                                <div class="stage-dot"></div>
                                <span>DUMP</span>
                                <div class="stage-value">-90%</div>
                            </div>
                        </div>
                        
                        <div class="cycle-progress">
                            <div class="progress-track">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="cycle-prediction">
                                <div class="prediction-label">NEXT:</div>
                                <div class="prediction-value blink">ULTRA MOON</div>
                                <div class="time-left">‚âà 2.5 MINS</div>
                            </div>
                        </div>

                        <div class="cycle-metrics">
                            <div class="metric">
                                <span>NORMIE FOMO:</span>
                                <span class="value increasing">‚ÜóÔ∏è EXTREME</span>
                            </div>
                            <div class="metric">
                                <span>DEGEN APE:</span>
                                <span class="value hot">üî• MAXIMUM</span>
                            </div>
                            <div class="metric">
                                <span>RUG RISK:</span>
                                <span class="value warning">‚ö†Ô∏è HIGH AF</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fibonacci Section -->
            <div class="analysis-section">
                <div class="section-title">
                    üåÄ FIBONACCI QUANTUM MATRIX
                </div>
                <div class="fib-container">
                    <!-- Main Grid -->
                    <div class="fib-grid">
                        <!-- Left Column -->
                        <div class="fib-column">
                            <div class="section-box">
                                <div class="section-header">RETRACEMENT</div>
                                <div class="fib-levels">
                                    <div class="fib-line">
                                        <span class="level">1.000</span>
                                        <span class="tag swing-high">SWING HIGH</span>
                                        <span class="price">$138.20</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">0.786</span>
                                        <span class="tag"></span>
                                        <span class="price">$132.45</span>
                                    </div>
                                    <div class="fib-line golden">
                                        <span class="level">0.618</span>
                                        <span class="tag golden-tag">GOLD-R</span>
                                        <span class="price">$126.80</span>
                                    </div>
                                    <div class="fib-line current-line">
                                        <span class="level">0.655</span>
                                        <span class="tag current-tag">CURRENT</span>
                                        <span class="price highlight">$124.30</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">0.500</span>
                                        <span class="tag"></span>
                                        <span class="price">$121.10</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">0.382</span>
                                        <span class="tag"></span>
                                        <span class="price">$115.40</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">0.236</span>
                                        <span class="tag"></span>
                                        <span class="price">$109.75</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">0.000</span>
                                        <span class="tag swing-low">SWING LOW</span>
                                        <span class="price">$104.10</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="fib-column">
                            <div class="section-box">
                                <div class="section-header">EXTENSION</div>
                                <div class="fib-levels">
                                    <div class="fib-line">
                                        <span class="level">4.236</span>
                                        <span class="tag"></span>
                                        <span class="price">$248.90</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">3.618</span>
                                        <span class="tag"></span>
                                        <span class="price">$227.65</span>
                                    </div>
                                    <div class="fib-line">
                                        <span class="level">2.618</span>
                                        <span class="tag"></span>
                                        <span class="price">$193.30</span>
                                    </div>
                                    <div class="fib-line golden-target">
                                        <span class="level">1.618</span>
                                        <span class="tag target-tag">GOLD-T</span>
                                        <span class="price">$159.50</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Info -->
                    <div class="fib-info">
                        <div class="info-row">
                            <div class="info-box support-box">
                                <div class="info-header">SUPPORT LEVEL</div>
                                <div class="info-content">
                                    <span class="level-value">0.618 ‚Üí $126.80</span>
                                    <span class="strength strong">STRONG</span>
                                </div>
                            </div>
                            <div class="info-box resistance-box">
                                <div class="info-header">RESISTANCE LEVEL</div>
                                <div class="info-content">
                                    <span class="level-value">0.786 ‚Üí $132.45</span>
                                    <span class="strength moderate">MODERATE</span>
                                </div>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-box trend-box">
                                <div class="info-header">TREND ANALYSIS</div>
                                <div class="info-content">
                                    <span class="trend bearish">BEARISH RETRACEMENT</span>
                                </div>
                            </div>
                            <div class="info-box pattern-box">
                                <div class="info-header">PATTERN FORMATION</div>
                                <div class="info-content">
                                    <span class="pattern harmonic">HARMONIC BAT FORMING</span>
                                    <span class="completion">68%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.market-analysis-card-container {
    height: 39.5vh;
    display: flex;
    flex-direction: column;
    font-family: 'Courier New', monospace;
    overflow: hidden;
    background: transparent;
}

.market-analysis-card-container h2 {
    padding: 0.5vh;
    margin: 0 !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 3 !important;
    background: linear-gradient(90deg, #001100 0%, #000300 100%);
    border-bottom: 1px solid #00ff00;
    font-family: 'Courier New', monospace;
    color: #00ff00;
    font-size: 1.24vh;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.market-content {
    position: absolute !important;
    top: 3vh !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 0.5vh !important;
    background: rgba(0, 5, 0, 0.2);
    font-family: 'Courier New', monospace;
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
    max-width: 100% !important;
}

.market-content::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
}

.market-analysis-card-container .analysis-container {
    flex: 1;
    overflow-y: auto;
    display: grid;
    grid-gap: 0.2rem;
    padding: 0.3vh;
    background: rgba(0, 5, 0, 0.2);
}

.market-analysis-card-container .analysis-section {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(0, 255, 0, 0.1);
    border-radius: 0;
    padding: 0.3rem;
    margin-bottom: 0.3rem;
}

.market-analysis-card-container .section-title {
    font-size: 1.24vh;
    color: #00ff00;
    margin-bottom: 0.2vh;
    padding: 0.1vh;
}

.market-analysis-card-container .section-content {
    padding: 0.2rem;
}

.market-analysis-card-container .analysis-panel {
    background: transparent;
    padding: 0.3rem 0;
}

.market-analysis-card-container .analysis-panel.danger {
    border-color: #ff0000;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.1);
}

.market-analysis-card-container .analysis-panel h3 {
    color: #00ff00;
    font-size: 0.8rem;
    margin: 0 0 0.3rem 0;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.market-analysis-card-container .heatmap-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.3rem;
    margin-top: 0.2rem;
}

.market-analysis-card-container .heatmap-cell {
    background: rgba(13, 17, 23, 0.4);
    padding: 0.3rem 0.4rem;
    border-radius: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
}

.market-analysis-card-container .heatmap-cell.hot {
    background: rgba(255, 62, 0, 0.2);
}

.market-analysis-card-container .heatmap-cell.warning {
    background: rgba(255, 170, 0, 0.2);
}

.market-analysis-card-container .heatmap-cell.dead {
    background: rgba(255, 0, 0, 0.2);
}

.market-analysis-card-container .heatmap-cell.nuclear {
    background: rgba(0, 255, 0, 0.2);
}

.market-analysis-card-container .strength-meter {
    margin: 0.3rem 0;
}

.market-analysis-card-container .meter-bar {
    height: 6px;
    background: #1a1a1a;
    border-radius: 3px;
    overflow: hidden;
    margin: 0.2rem 0;
}

.market-analysis-card-container .meter-bar .fill {
    height: 100%;
    background: linear-gradient(90deg, #ff0000, #ffaa00, #00ff00);
    transition: width 0.3s ease;
}

.market-analysis-card-container .meter-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.2rem;
    font-size: 0.7rem;
    color: #8b949e;
}

.market-analysis-card-container .meter-labels .current {
    color: #00ff00;
    font-weight: bold;
}

.market-analysis-card-container .radar-display {
    position: relative;
    height: 150px;
    background: #0a0a0a;
    border-radius: 0.25rem;
    overflow: hidden;
    margin-bottom: 0.75rem;
}

.market-analysis-card-container .radar-sweep {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150%;
    height: 150%;
    background: linear-gradient(90deg, transparent 50%, rgba(0, 255, 0, 0.1) 100%);
    animation: market-sweep 4s infinite linear;
    transform-origin: 0 0;
}

.market-analysis-card-container .target {
    position: absolute;
    width: 10px;
    height: 10px;
    background: #ff0000;
    border-radius: 50%;
    opacity: 0.8;
}

.market-analysis-card-container .manipulation-alerts {
    font-size: 0.75rem;
}

.market-analysis-card-container .alert {
    display: flex;
    justify-content: space-between;
    padding: 0.25rem 0;
    border-bottom: 1px solid rgba(255, 0, 0, 0.2);
}

.market-analysis-card-container .alert .time {
    color: #8b949e;
}

.market-analysis-card-container .alert .event {
    color: #ff0000;
}

.market-analysis-card-container .alert .probability {
    color: #00ff00;
}

.market-analysis-card-container .cycle-container {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 0.25rem;
    padding: 0.75rem;
}

.market-analysis-card-container .cycle-stages {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    position: relative;
}

.market-analysis-card-container .cycle-stages::before {
    content: '';
    position: absolute;
    top: 15px;
    left: 0;
    right: 0;
    height: 2px;
    background: rgba(0, 255, 0, 0.2);
    z-index: 1;
}

.market-analysis-card-container .stage-box {
    position: relative;
    z-index: 2;
    text-align: center;
    width: 25%;
}

.market-analysis-card-container .stage-dot {
    width: 12px;
    height: 12px;
    background: #1a1a1a;
    border: 2px solid #00ff00;
    border-radius: 50%;
    margin: 10px auto;
}

.market-analysis-card-container .stage-box.active .stage-dot {
    background: #00ff00;
}

.market-analysis-card-container .stage-box.next .stage-dot {
    animation: pulse-next 2s infinite;
}

.market-analysis-card-container .stage-box span {
    display: block;
    font-size: 0.75rem;
    color: #8b949e;
    margin-top: 0.25rem;
}

.market-analysis-card-container .stage-box.active span {
    color: #00ff00;
    font-weight: bold;
}

.market-analysis-card-container .stage-value {
    font-size: 0.7rem;
    color: #00ff00;
    opacity: 0.7;
}

.market-analysis-card-container .cycle-progress {
    margin: 1rem 0;
}

.market-analysis-card-container .progress-track {
    height: 4px;
    background: rgba(0, 255, 0, 0.1);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

.market-analysis-card-container .progress-fill {
    height: 100%;
    width: 65%;
    background: linear-gradient(90deg, #00ff00, #ffaa00);
    animation: progress-pulse 2s infinite;
}

.market-analysis-card-container .cycle-prediction {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.market-analysis-card-container .prediction-label {
    color: #8b949e;
}

.market-analysis-card-container .prediction-value {
    color: #00ff00;
    font-weight: bold;
}

.market-analysis-card-container .time-left {
    color: #ffaa00;
    font-size: 0.75rem;
}

.market-analysis-card-container .cycle-metrics {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    margin-top: 1rem;
}

.market-analysis-card-container .metric {
    background: rgba(0, 0, 0, 0.3);
    padding: 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
}

.market-analysis-card-container .metric span:first-child {
    color: #8b949e;
}

.market-analysis-card-container .metric .value {
    display: block;
    margin-top: 0.25rem;
    font-weight: bold;
}

.market-analysis-card-container .value.increasing {
    color: #00ff00;
}

.market-analysis-card-container .value.hot {
    color: #ff3e00;
}

.market-analysis-card-container .value.warning {
    color: #ffaa00;
}

.market-analysis-card-container .blink {
    animation: none;
}

@keyframes pulse-next {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.4);
    }
    50% {
        box-shadow: 0 0 0 5px rgba(0, 255, 0, 0);
    }
}

@keyframes progress-pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

@keyframes subtle-pulse {
    0% { opacity: 1; }
    50% { opacity: 0.85; }
    100% { opacity: 1; }
}

@keyframes market-sweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes market-matrix {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

@keyframes market-sweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes market-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes market-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

@keyframes market-highlight-pulse {
    0%, 100% {
        background: #1a1a1a;
    }
    50% {
        background: rgba(0, 255, 0, 0.1);
    }
}
</style>

<script>
// Load real market analysis data without changing UI
async function loadMarketAnalysis() {
    try {
        const response = await fetch('/api/market-analysis');
        const data = await response.json();
        
        // Update header stats with real data
        const marketStats = document.getElementById('market-stats');
        if (marketStats && data.market_overview) {
            marketStats.textContent = `FOMO: ${data.market_overview.fear_greed} ¬ª TREND: ${data.market_overview.sentiment} ¬ª RSI: ${data.technical_analysis?.rsi_1h || '72'}`;
        }
        
        console.log('‚úÖ Market Analysis Data Loaded:', data);
        
    } catch (error) {
        console.error('Error loading market analysis:', error);
        const marketStats = document.getElementById('market-stats');
        if (marketStats) {
            marketStats.textContent = 'ERROR LOADING DATA';
            marketStats.style.color = '#ff0000';
        }
    }
}

// Make function globally available
window.loadMarketAnalysis = loadMarketAnalysis;

// Load on page ready
document.addEventListener('DOMContentLoaded', loadMarketAnalysis);

// Auto-refresh every 15 seconds
setInterval(loadMarketAnalysis, 15000);
</script>

.fib-container {
    display: flex;
    flex-direction: column;
    gap: 0.2vh;
    max-width: 100%;
    overflow-x: hidden;
}

.fib-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.2vh;
    width: 100%;
}

.fib-column {
    padding: 0.1vh;
    min-width: 0;
}

.section-box {
    background: rgba(0, 255, 0, 0.02);
    border: 1px solid rgba(0, 255, 0, 0.1);
    padding: 0.2vh;
    overflow: hidden;
}

.section-header {
    font-size: 1.24vh;
    color: #00ff00;
    padding: 0.2vh 0.4vh;
    margin-bottom: 0.3vh;
    background: rgba(0, 255, 0, 0.05);
    border: 1px solid rgba(0, 255, 0, 0.1);
    letter-spacing: 0.05em;
}

.fib-line {
    display: grid;
    grid-template-columns: 4em auto minmax(5em, auto);
    gap: 0.8vh;
    padding: 0.15vh 0.3vh;
    font-size: 1.24vh;
    align-items: center;
    width: 100%;
    position: relative;
    border-bottom: 1px solid rgba(0, 255, 0, 0.05);
}

.level {
    color: #00ff00;
    font-family: 'Courier New', monospace;
    font-size: 1.24vh;
    opacity: 0.9;
}

.price {
    color: #ffffff;
    opacity: 0.8;
    font-family: 'Courier New', monospace;
    font-size: 1.24vh;
    text-align: right;
}

.tag {
    font-size: 1.1vh;
    padding: 0.1vh 0.4vh;
    border-radius: 1px;
    white-space: nowrap;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

.swing-high {
    color: #ff0000;
    background: rgba(255, 0, 0, 0.1);
}

.swing-low {
    color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.golden-tag {
    color: #ffd700;
    background: rgba(255, 215, 0, 0.1);
}

.target-tag {
    color: #00ffff;
    background: rgba(0, 255, 255, 0.1);
}

.current-line {
    background: rgba(0, 255, 0, 0.05);
    border: 1px solid rgba(0, 255, 0, 0.1);
}

.current-line .price.highlight {
    color: #00ff00;
    font-weight: bold;
    opacity: 1;
}

.current-tag {
    color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.fib-info {
    display: flex;
    flex-direction: column;
    gap: 0.2vh;
}

.info-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.2vh;
    width: 100%;
}

.info-box {
    min-width: 0;
    background: rgba(0, 5, 0, 0.2);
    border: 1px solid rgba(0, 255, 0, 0.1);
    padding: 0.3vh;
}

.info-header {
    font-size: 1.24vh;
    color: #00ff00;
    margin-bottom: 0.2vh;
    letter-spacing: 0.05em;
}

.info-content {
    display: grid;
    grid-template-columns: auto auto;
    gap: 0.4vh;
    align-items: center;
    padding: 0.1vh;
}

.level-value {
    font-size: 1.24vh;
    font-family: 'Courier New', monospace;
    white-space: nowrap;
    opacity: 0.9;
}

.strength {
    font-size: 1.1vh;
    padding: 0.1vh 0.4vh;
    border-radius: 2px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.strength.strong {
    color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
}

.strength.moderate {
    color: #ffff00;
    background: rgba(255, 255, 0, 0.1);
}

.trend {
    color: #ff0000;
    font-size: 1.24vh;
}

.pattern {
    color: #00ffff;
    font-size: 1.24vh;
}

.completion {
    color: #ffff00;
    font-size: 1.1vh;
    background: rgba(255, 255, 0, 0.1);
    padding: 0.1vh 0.4vh;
    border-radius: 2px;
    margin-left: 0.4vh;
}

.golden {
    background: rgba(255, 215, 0, 0.02);
}

.golden-target {
    background: rgba(0, 255, 255, 0.02);
}
</style>

<script>
// Animate the cycle needle
setInterval(() => {
    const needle = document.querySelector('.cycle-needle');
    const rotation = Math.random() * 180;
    needle.style.transform = `rotate(${rotation}deg)`;
}, 4000);

// Update matrix rain
setInterval(() => {
    const matrix = document.querySelector('.matrix-rain');
    matrix.textContent = Math.random().toString(2).substr(2, 5);
}, 200);
</script> 